{"version":3,"file":"static/js/616.e6488528.chunk.js","mappings":"yLAMA,MA8CA,EA9C4BA,KAC1B,MAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OACVC,KAAOC,EAAW,UAAEC,EAAS,MAAEC,IAASC,EAAAA,EAAAA,KAAaC,GAASA,EAAMC,WA0B3E,OAzBAC,QAAQC,IAAI,6CAEZC,EAAAA,EAAAA,YAAU,KAGR,GAFEF,QAAQC,IAAI,oDAETP,EAAY,CAEfM,QAAQC,IAAI,qBACZ,MAAME,GAAKC,EAAAA,EAAAA,IAAU,OAAS,GAC9B,IAAID,EAGF,OAFAH,QAAQC,IAAI,WAELZ,EAAS,WAElBW,QAAQC,IAAI,eAEZV,GAASc,EAAAA,EAAAA,IAAcF,GAE3B,IACK,IAMDR,GAAcC,IAASF,GAWzBY,EAAAA,EAAAA,KAAA,MAAAC,SAAI,gBAVJP,QAAQC,IAAI,gBAAiBO,KAAKC,MAAMf,KAGtCY,EAAAA,EAAAA,KAAA,OAAAC,UACED,EAAAA,EAAAA,KAACI,EAAAA,GAAM,MAQf,C,oDC/CO,MAAMC,EAAYA,CAACC,EAAMC,EAAOC,KACrC,IAAIC,EAAU,GACd,GAAID,EAAM,CACR,MAAME,EAAO,IAAIC,KACjBD,EAAKE,QAAQF,EAAKG,UAAmB,GAAPL,EAAY,KAC1CC,EAAU,aAAeC,EAAKI,aAChC,CACAC,SAASC,OAASV,EAAO,IAAMC,EAAQE,EAAU,UAAU,EAIhDX,EAAaQ,IACxB,MACMW,EADQ,KAAKF,SAASC,SACRE,MAAM,KAAKZ,MAC/B,OAAqB,IAAjBW,EAAME,OAAqBF,EAAMG,MAAMF,MAAM,KAAKG,QAC/C,IAAI,EAGAC,EAAgBhB,IAC3BZ,QAAQC,IAAI,6BACZoB,SAASC,OAAS,GAAGV,oDAAuD,C","sources":["Pages/Layouts/ProtectedPageLayout.jsx","utils/cookie.js"],"sourcesContent":["\r\nimport { Outlet, useNavigate } from 'react-router-dom'\r\nimport {getCookie, setCookie} from \"../../utils/cookie\"\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport {validateToken} from \"../../utils/slice/UserDataSlice\"\r\nimport {useEffect} from \"react\"\r\nconst ProtectedPageLayout = () => {\r\n  const navigate = useNavigate()\r\n  const dispatch = useDispatch()\r\n  const {user : currentUser, isLoading, error} = useSelector((state)=> state.userData) \r\n  console.log(\"________PROTECTED PAGE RENDERING________\")\r\n  // encapsulating under useEffect because we have navigate   \r\n  useEffect(()=>{\r\n      console.log(\"üî¥ checking user or at present or not\")\r\n    // if no current user is set, then\r\n    if (!currentUser){\r\n      // check if the AT is present in the cookie or not\r\n      console.log(\"No Current User!!\")\r\n      const AT = getCookie('at') || \"\"\r\n      if(!AT){\r\n        console.log(\" NOO AT\")\r\n        // if not, redirect to login page\r\n        return navigate('/signin')\r\n      }\r\n      console.log(\" AT PRESENT\")\r\n      // now validate the AT\r\n      dispatch(validateToken(AT))\r\n\r\n  }\r\n    }, [])\r\n    \r\n\r\n\r\n\r\n  // console.log(currentUser ,error, isLoading)\r\n  if(!isLoading && !error && currentUser){\r\n    console.log(\" User present\", JSON.parse(currentUser))\r\n\r\n    return (\r\n      <div>\r\n        <Outlet />\r\n      </div>\r\n    )\r\n}\r\nelse{\r\n  return(\r\n    <h1>Loading...</h1>\r\n  )\r\n}\r\n\r\n}\r\n\r\nexport default ProtectedPageLayout","// Function to set a cookie\r\nexport const setCookie = (name, value, mins) => {\r\n  let expires = \"\";\r\n  if (mins) {\r\n    const date = new Date();\r\n    date.setTime(date.getTime() + mins * 60 * 1000);\r\n    expires = \"; expires=\" + date.toUTCString();\r\n  }\r\n  document.cookie = name + \"=\" + value + expires + \"; path=/\";\r\n};\r\n\r\n// Function to get a cookie by name\r\nexport const getCookie = (name) => {\r\n  const value = `; ${document.cookie}`;\r\n  const parts = value.split(`; ${name}=`);\r\n  if (parts.length === 2) return parts.pop().split(\";\").shift();\r\n  return null;\r\n};\r\n\r\nexport const deleteCookie = (name) => {\r\n  console.log(\"deleteCookie üê∂\");\r\n  document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\r\n};\r\n"],"names":["ProtectedPageLayout","navigate","useNavigate","dispatch","useDispatch","user","currentUser","isLoading","error","useSelector","state","userData","console","log","useEffect","AT","getCookie","validateToken","_jsx","children","JSON","parse","Outlet","setCookie","name","value","mins","expires","date","Date","setTime","getTime","toUTCString","document","cookie","parts","split","length","pop","shift","deleteCookie"],"sourceRoot":""}